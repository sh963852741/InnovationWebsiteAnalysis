<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <noscript>Your browser does not support JavaScript!</noscript>
    <link href="css/bootstrap.css" rel="stylesheet" />
    <script src="js/jquery-3.5.1.js" type="text/javascript"></script>
    <script src="js/bootstrap.bundle.js" type="text/javascript"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts@4.9.0/dist/echarts.js"></script>
    <title>输入页面名</title>
</head>

<body>
    <div class="jumbotron jumbotron-fluid">
        <div class="container">
            <h1 class="display-4">信息学院大创项目分析图</h1>
            <p class="lead">这是一个十分庞大的项目，有概览图、详细图什么的。</p>
        </div>
    </div>
    <!--概览图-->
    <div class="container-xl">
        <div id="main-chart" style="width: 100%; height:600px;"></div>
    </div>
    <hr />
    <!--详细图-->
    <div class="container-xl">
        <div class="row">
            <div class="col-6">
                <div class="row">
                    <div id="detail-chart-1" style="width: 100%; height: 45vh;"></div>
                </div>
                <div class="row">
                    <div id="detail-chart-2" style="width: 100%; height: 45vh;">
                        <em>此处空白</em>
                    </div>
                </div>
            </div>
            <div class="col-6">
                <div id="detail-chart-3" style=" height: 90vh;"></div>
            </div>
        </div>
    </div>
    <script src="js/testdata.js"></script>
    <script type="text/javascript">
        loadMainChart();
        loadDetailChart();
        function loadMainChart() {
            let mainChart = echarts.init(document.getElementById('main-chart'));
            let option = {
                title: {
                    text: '总览'
                },
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'cross',
                        crossStyle: {}
                    }
                },
                legend: {
                    data: ['已立项', '已结题', '参与学生数']
                },
                xAxis: {
                    type: 'category',
                    data: ["2016(1)", "2016(2)", "2017(1)", "2017(2)", "2018(1)", "2018(2)", "2019(1)", "2019(2)", "2020(1)", "2020(2)"],
                    axisPointer: {
                        type: 'shadow'
                    }
                },
                yAxis: [
                    {
                        type: 'value',
                        name: '学生数',
                        axisLabel: {
                            formatter: '{value} 人'
                        }
                    },
                    {
                        type: 'value',
                        name: '项目数',
                        axisLabel: {
                            formatter: '{value} 项'
                        }
                    }
                ],
                series: [{
                    name: '已立项',
                    type: 'bar',
                    data: data.mainChart.established
                },
                {
                    name: '已结题',
                    type: 'bar',
                    data: data.mainChart.concluded
                },
                {
                    name: '参与学生数',
                    type: 'line',
                    yAxisIndex: 1,
                    data: data.mainChart.studentCount
                }]
            };
            mainChart.setOption(option);
        }
        function loadDetailChart(batchNumber) {
            let detailChart1 = echarts.init(document.getElementById('detail-chart-1'));
            let option1 = {
                series: {
                    type: 'sunburst',
                    data: data.detailChart1.data
                }
            }
            detailChart1.setOption(option1);

            let detailChart3 = echarts.init(document.getElementById('detail-chart-3'));
            let option3 = {
                title: {
                    text: '学院老师指导大创项目数'
                },
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'shadow'
                    }
                },
                legend: {
                    data: ['已立项', '已结题']
                },
                xAxis: {
                    type: 'value'
                },
                yAxis: {
                    type: 'category',
                    data: ['刘一', '陈二', '张三', '李四', '王五', '赵六', '孙七', '周八']
                },
                series: [
                    {
                        name: '已立项',
                        type: 'bar',
                        data: data.detailChart3.established
                    },
                    {
                        name: '已结题',
                        type: 'bar',
                        data: data.detailChart3.concluded
                    }
                ]
            }
            detailChart3.setOption(option3);
        }
    </script>
</body>

</html>